<p-table
        [value]="displayLog"
        [selection]="displayLog.find(isPointedByHead)"
        [rowHover]="true"
        [scrollable]="true"
        selectionMode="single"
        styleClass="pointer borderless p-datatable-sm"
>
    <ng-template pTemplate="header">
        <tr class="uppercase text-gray">
            <th>Branch / Tag</th>
            <th>Graph</th>
            <th style="min-width: 100px;">Commit message</th>
            <th>Author</th>
            <th style="min-width: 170px;">Commit date / time</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowIndex="rowIndex">
        <tr class="commit-row" [pSelectableRow]="displayLog[rowIndex]">
            <td class="branch-tag">
                <i *ngIf="displayLog[rowIndex].branchDetails?.isPointedByLocalHead" class="fa fa-check mr-2"></i>
                {{ displayLog[rowIndex].branchDetails?.branches?.map(branchName).filter(removeDuplicates).join('\n') ?? '' }}
                <i *ngIf="displayLog[rowIndex].branchDetails?.remote" class="fa fa-github mr-2"></i>
                <i *ngIf="displayLog[rowIndex].branchDetails?.local" class="fa fa-laptop mr-2"></i>
            </td>
            <td class="graph" [style.min-width.px]="drawMatrix[0].length * 30">
                <ng-container *ngFor="let rowCell of drawMatrix[rowIndex]; index as col">
                    <ng-container *ngFor="let toDraw of rowCell"> <!-- toDraw is a CellContent -->
                        <ng-container *ngIf="isDisplayRef(toDraw)">
                            <div
                                    class="drawing bubble"
                                    [ngClass]="displayRefClass(toDraw.value)"
                                    [style.left.px]="col * 24"
                                    [style.filter]="'hue-rotate(' + toDraw.color * 360 / notZero(this.branches.length) + 'deg)'">
                                {{ refContents(toDraw.value) }}
                            </div>
                        </ng-container>
                        <ng-container *ngIf="isLogMatrixSymbol(toDraw.value)">
                            <div [style.left.px]="2 + col * 24"
                                 class="drawing line"
                                 [ngClass]="logMatrixSymbolClasses[toDraw.value]"
                                 [style.filter]="'hue-rotate(' + toDraw.color * 360 / notZero(this.branches.length) + 'deg)'">
                            </div>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </td>
            <td class="summary">{{ displayLog[rowIndex].summary }}</td>
            <td class="text-gray">{{ displayLog[rowIndex].author.name }}</td>
            <td class="text-gray">{{ displayLog[rowIndex].author.date | date: 'd/M/YYYY @ HH:mm' }}</td>
        </tr>
    </ng-template>
</p-table>
