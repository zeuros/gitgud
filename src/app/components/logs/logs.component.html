<p-table
        #logTable
        [value]="displayLog"
        [selection]="[displayLog.find(isPointedByHead)]"
        [rowHover]="true"
        [scrollable]="true"
        [scrollHeight]="'flex'"
        [resizableColumns]="true"
        selectionMode="multiple" [metaKeySelection]="true"
        styleClass="pointer borderless p-datatable-sm"
>
    <ng-template pTemplate="header">
        <tr class="uppercase text-gray">
            <th pResizableColumn>Branch / Tag</th>
            <th pResizableColumn [style.min-width.px]="CANVAS_MARGIN[0] + xPosition(graphColumnCount)">Graph</th>
            <th pResizableColumn style="min-width: 100px;">Commit message</th>
            <th pResizableColumn>Author</th>
            <th pResizableColumn style="min-width: 170px;">Commit date / time</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowIndex="rowIndex">
        <tr class="commit-row" [pSelectableRow]="displayLog[rowIndex]" [style.padding-bottom.px]="NODES_VERTICAL_SPACING / 2">
            <td class="branch-tag">
                <i *ngIf="displayLog[rowIndex].branchDetails?.isPointedByLocalHead" class="fa fa-check mr-2"></i>
                {{ displayLog[rowIndex].branchDetails?.branches?.map(branchName).filter(removeDuplicates).join('\n') ?? '' }}
                <i *ngIf="displayLog[rowIndex].branchDetails?.remote" class="fa fa-github mr-2"></i>
                <i *ngIf="displayLog[rowIndex].branchDetails?.local" class="fa fa-laptop mr-2"></i>
            </td>
            <td class="graph">
                <div>
                    <canvas #canvas
                            *ngIf="rowIndex == 0"
                            id="commit-graph-canvas"
                            [height]="yPosition(displayLog.length - 1) + NODE_RADIUS"
                            [width]="xPosition(graphColumnCount - 1) + NODE_RADIUS"
                            [style.left.px]="CANVAS_MARGIN[0]"
                            [style.top.px]="CANVAS_MARGIN[1]"
                    ></canvas>
                </div>
                <div class="commit-highlight-background" [style.left.px]="CANVAS_MARGIN[0] + xPosition(displayLog[rowIndex].indent)"></div>
            </td>
            <td class="summary">{{ displayLog[rowIndex].summary }}</td>
            <td class="author text-gray">{{ displayLog[rowIndex].author.name }}</td>
            <td class="date text-gray">{{ displayLog[rowIndex].author.date | date: 'd/M/YYYY @ HH:mm' }}</td>
        </tr>
    </ng-template>
</p-table>
